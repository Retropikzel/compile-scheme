ARG SCHEME=chibi
ARG IMAGE=chibi:head
FROM schemers/${IMAGE}
RUN apt-get update && apt-get install -y \
    build-essential \
    make \
    libffi-dev \
    ca-certificates \
    git \
    pandoc
ENV PATH=${PATH}:/usr/local-other/bin
ARG SCHEME=chibi
ENV COMPILE_R7RS=${SCHEME}
RUN git clone https://github.com/ashinn/chibi-scheme.git --depth=1 \
    && cd chibi-scheme && make -j 16 && make -j 16 install
RUN mkdir -p ${HOME}/.snow && echo "()" > ${HOME}/.snow/config.scm
